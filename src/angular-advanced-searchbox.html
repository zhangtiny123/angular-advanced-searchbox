<div class="box-container">
    <div class="advancedSearchBox" ng-class="{active : isActiveBox()}" ng-init="focus = false">
        <span ng-show="searchParams.length < 1 && searchQuery.length === 0"
              class="search-icon glyphicon glyphicon-search"></span>
        <a ng-href="" ng-show="searchParams.length > 0 || searchQuery.length > 0" ng-click="removeAll()" role="button">
            <span class="remove-all-icon glyphicon glyphicon-trash"></span>
        </a>


        <div class="search-parameter" ng-repeat="searchParam in searchParams">
            <a ng-href="" ng-click="removeSearchParam($index)" role="button">
                <span class="remove glyphicon glyphicon-remove"></span>
            </a>

            <div class="key"  ng-click="enterEditMode($index)">{{searchParam.name}} :</div>
            <div class="value">
                <span ng-if="!searchParam.editMode" ng-click="enterEditMode($index)">{{searchParam.value.name}}</span>
                <input name="value"
                       type="text"
                       nit-auto-size-input
                       nit-set-focus="searchParam.editMode"
                       ng-keydown="keydown($event, $index)"
                       ng-if="searchParam.editMode"
                       ng-change="searchParamValueChanged(searchParam)"
                       ng-model="searchParam.value.name"
                       typeahead="suggestion as suggestion.name for suggestion in searchParam.suggestions | filter:{name:$viewValue} | limitTo:8"
                       placeholder="{{searchParam.placeholder}}"/>
            </div>
        </div>
        <div class="search-input-container">
            <input name="searchbox"
                   class="search-parameter-input"
                   ng-click="focusSearchBox()"
                   type="text"
                   nit-auto-size-input
                   nit-set-focus="setSearchFocus"
                   ng-keydown="keydown($event)"
                   placeholder="{{placeholder}}"
                   ng-focus="focus = true"
                   ng-blur="focus = false"
                   typeahead-on-select="typeaheadOnSelect($item, $model, $label)"
                   typeahead="parameter as parameter.name for parameter in parameters | filter:{name:$viewValue} | limitTo:8"
                   ng-change="searchQueryChanged(searchQuery)"
                   ng-model="searchQuery"/>
        </div>
    </div>
    <div class="suggest-drop-down" ng-show="parameters && focus && searchQuery == ''">
        <ul>
            <li  ng-mousedown="addSearchParam(param)" ng-repeat="param in parameters">
                {{param.name}}
            </li>
        </ul>
    </div>
</div>